---
import { getPosts } from "@/data"
import { type CollectionEntry } from "astro:content"

import BlogLayout from "@/layouts/BlogLayout.astro"

import Anchor from "@/components/mdx/Anchor.astro"
import ArticleImage from "@/components/mdx/ArticleImage.astro"
import Heading1 from "@/components/mdx/Heading1.astro"
import Heading2 from "@/components/mdx/Heading2.astro"
import Heading3 from "@/components/mdx/Heading3.astro"
import InlineCode from "@/components/mdx/InlineCode.astro"

type Props = CollectionEntry<"blog">

export async function getStaticPaths() {
  return (await getPosts()).map((post) => ({
    params: { slug: post.slug },
    props: post,
  }))
}

const post = Astro.props
const { Content } = await post.render()
---

<BlogLayout {...post.data}>
  <Content
    components={{
      h1: Heading1,
      h2: Heading2,
      h3: Heading3,
      img: ArticleImage,
      a: Anchor,
      code: InlineCode,
    }}
  />
</BlogLayout>
